<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>jsPsych.pluginAPI - jsPsych</title>
  

  <link rel="shortcut icon" href="../../favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/extra.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "jsPsych.pluginAPI";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 
  <script src="../../js/extra.js"></script>
  <script src="../../js/analytics.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> jsPsych</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Introduction</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Tutorials</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/hello-world/">The Basics: Hello World</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/rt-task/">Demo Experiment: Simple Reaction Time Task</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Features</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/timeline/">Creating an Experiment: The Timeline</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/data/">Data Storage</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/functions-as-parameters/">Dynamic Content:  Using Functions as Plugin Parameters</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/callbacks/">Event-related Callback Functions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/media-preloading/">Media Preloading</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/fullscreen/">Fullscreen Experiments</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/progress-bar/">Automatic Progress Bar</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../features/mturk/">Integrating with Mechanical Turk</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Core Library API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../overview/">Overview</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../jspsych-core/">jsPsych core</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../jspsych-data/">jsPsych.data</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../jspsych-randomization/">jsPsych.randomization</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../jspsych-turk/">jsPsych.turk</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">jsPsych.pluginAPI</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#jspsychpluginapi">jsPsych.pluginAPI</a></li>
                
                    <li><a class="toctree-l4" href="#jspsychpluginapiautopreload">jsPsych.pluginAPI.autoPreload</a></li>
                
                    <li><a class="toctree-l4" href="#jspsychpluginapicancelallkeyboardresponses">jsPsych.pluginAPI.cancelAllKeyboardResponses</a></li>
                
                    <li><a class="toctree-l4" href="#jspsychpluginapicancelkeyboardresponse">jsPsych.pluginAPI.cancelKeyboardResponse</a></li>
                
                    <li><a class="toctree-l4" href="#jspsychpluginapiconvertkeycharactertokeycode">jsPsych.pluginAPI.convertKeyCharacterToKeyCode</a></li>
                
                    <li><a class="toctree-l4" href="#jspsychpluginapigetaudiobuffer">jsPsych.pluginAPI.getAudioBuffer</a></li>
                
                    <li><a class="toctree-l4" href="#jspsychpluginapigetkeyboardresponse">jsPsych.pluginAPI.getKeyboardResponse</a></li>
                
                    <li><a class="toctree-l4" href="#jspsychpluginapievaluatefunctionparameters">jsPsych.pluginAPI.evaluateFunctionParameters</a></li>
                
                    <li><a class="toctree-l4" href="#jspsychpluginapipreloadimages">jsPsych.pluginAPI.preloadImages</a></li>
                
                    <li><a class="toctree-l4" href="#jspsychpluginapipreloadimages_1">jsPsych.pluginAPI.preloadImages</a></li>
                
                    <li><a class="toctree-l4" href="#jspsychpluginapiregisterpreload">jsPsych.pluginAPI.registerPreload</a></li>
                
            
            </ul>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Plugins</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/overview/">Overview</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/creating-a-plugin/">Creating a New Plugin</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-animation/">jspsych-animation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-call-function/">jspsych-call-function</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-categorize/">jspsych-categorize</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-categorize-animation/">jspsych-categorize-animation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-free-sort/">jspsych-free-sort</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-html/">jspsych-html</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-instructions/">jspsych-instructions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-multi-stim-multi-response/">jspsych-multi-stim-multi-response</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-palmer/">jspsych-palmer</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-reconstruction/">jspsych-reconstruction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-same-different/">jspsych-same-different</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-similarity/">jspsych-similarity</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-single-audio/">jspsych-single-audio</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-single-stim/">jspsych-single-stim</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-survey-likert/">jspsych-survey-likert</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-survey-multi-choice/">jspsych-survey-multi-choice</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-survey-text/">jspsych-survey-text</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-text/">jspsych-text</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-visual-search-circle/">jspsych-visual-search-circle</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-vsl-animate-occlusion/">jspsych-vsl-animate-occlusion</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-vsl-grid-scene/">jspsych-vsl-grid-scene</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-xab/">jspsych-xab</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../support/">Support</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>About</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../about/about/">About jsPsych</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../about/license/">License</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../about/contributing/">Contributing to jsPsych</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">jsPsych</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Core Library API &raquo;</li>
        
      
    
    <li>jsPsych.pluginAPI</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/jodeleeuw/jsPsych" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="jspsychpluginapi">jsPsych.pluginAPI</h1>
<p>The pluginAPI module contains functions that are useful when developing new plugins.</p>
<hr />
<h2 id="jspsychpluginapiautopreload">jsPsych.pluginAPI.autoPreload</h2>
<pre><code>jsPsych.pluginAPI.autoPreload(timeline, callback)
</code></pre>

<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>timeline</td>
<td>TimelineNode object</td>
<td>A TimelineNode object that contains an arbitrary set of trials.</td>
</tr>
<tr>
<td>callback</td>
<td>function</td>
<td>A function to execute when loading is complete</td>
</tr>
</tbody>
</table>
<h3 id="return-value">Return value</h3>
<p>Returns nothing.</p>
<h3 id="description">Description</h3>
<p>Attempts to preload all image files and audio files that will be used to run the trials on the timeline. Content will only preload from plugins that have used the <code>registerPreload</code> method to define the media types of their parameters.</p>
<p>The callback function executes once all of the files are preloaded.</p>
<p>This method is used internally by the core jsPsych code. It is not recommended that you call it manually.</p>
<h3 id="examples">Examples</h3>
<pre><code class="javascript">// you probably shouldn't use this method
</code></pre>

<hr />
<h2 id="jspsychpluginapicancelallkeyboardresponses">jsPsych.pluginAPI.cancelAllKeyboardResponses</h2>
<pre><code>jsPsych.pluginAPI.cancelAllKeyboardResponses()
</code></pre>

<h3 id="parameters_1">Parameters</h3>
<p>None.</p>
<h3 id="return-value_1">Return value</h3>
<p>Returns nothing.</p>
<h3 id="description_1">Description</h3>
<p>Cancels all currently active keyboard listeners created by <code>jsPsych.pluginAPI.getKeyboardResponse</code>.</p>
<h3 id="examples_1">Examples</h3>
<pre><code class="javascript">jsPsych.pluginAPI.cancelAllKeyboardResponses();
</code></pre>

<hr />
<h2 id="jspsychpluginapicancelkeyboardresponse">jsPsych.pluginAPI.cancelKeyboardResponse</h2>
<pre><code>jsPsych.pluginAPI.cancelKeyboardResponse(listener_id)
</code></pre>

<h3 id="parameters_2">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>listener_id</td>
<td>object</td>
<td>The listener_id object generated by the call to <code>jsPsych.pluginAPI.getKeyboardResponse</code>.</td>
</tr>
</tbody>
</table>
<h3 id="return-value_2">Return value</h3>
<p>Returns nothing.</p>
<h3 id="description_2">Description</h3>
<p>Cancels a specific keyboard listener created by <code>jsPsych.pluginAPI.getKeyboardResponse</code>.</p>
<h3 id="examples_2">Examples</h3>
<pre><code class="javascript">// create a persistent keyboard listener
var listener_id = jsPsych.pluginAPI.getKeyboardResponse(after_response, ['p','q'], 'date', true);

// cancel keyboard listener
jsPsych.pluginAPI.cancelKeyboardResponse(listener_id);
</code></pre>

<hr />
<h2 id="jspsychpluginapiconvertkeycharactertokeycode">jsPsych.pluginAPI.convertKeyCharacterToKeyCode</h2>
<pre><code>jsPsych.pluginAPI.convertKeyCharacterToKeyCode(character)
</code></pre>

<h3 id="parameters_3">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>character</td>
<td>string</td>
<td>The string representation of keyboard key.</td>
</tr>
</tbody>
</table>
<h3 id="return-value_3">Return value</h3>
<p>Returns the numeric keycode associated with the <code>character</code> parameter.</p>
<h3 id="description_3">Description</h3>
<p>Converts between the string representation of a key and the numeric key code associated with that key.</p>
<h3 id="examples_3">Examples</h3>
<pre><code class="javascript">var keycode = jsPsych.pluginAPI.convertKeyCharacterToKeyCode('a')
// keycode is 65

keycode = jsPsych.pluginAPI.convertKeyCharacterToKeyCode('space')
// keycode is 32
</code></pre>

<hr />
<h2 id="jspsychpluginapigetaudiobuffer">jsPsych.pluginAPI.getAudioBuffer</h2>
<pre><code>jsPsych.pluginAPI.getAudioBuffer(filepath)
</code></pre>

<h3 id="parameters_4">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>filepath</td>
<td>string</td>
<td>The path to the audio file that was preloaded.</td>
</tr>
</tbody>
</table>
<h3 id="return-value_4">Return value</h3>
<p>Returns an audio buffer compatible with the WebAudio API for the given filepath.</p>
<h3 id="description_4">Description</h3>
<p>Gets an AudioBuffer that can be played with the WebAudio API. The file must be preloaded with <code>preloadAudioFiles</code> or the automatic preload (<code>autoPreload</code>).</p>
<h3 id="examples_4">Examples</h3>
<pre><code class="javascript">// the code below is used to play audio in the single-audio plugin
var source = context.createBufferSource();
source.buffer = jsPsych.pluginAPI.getAudioBuffer(trial.stimulus);
source.connect(context.destination);
startTime = context.currentTime + 0.1;
source.start(startTime);
</code></pre>

<hr />
<h2 id="jspsychpluginapigetkeyboardresponse">jsPsych.pluginAPI.getKeyboardResponse</h2>
<pre><code>jsPsych.pluginAPI.getKeyboardResponse(parameters)
</code></pre>

<h3 id="parameters_5">Parameters</h3>
<p>The method accepts an object of parameter values (see example below). The valid keys for this object are listed in the table below.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>callback_function</td>
<td>function</td>
<td>The function to execute whenever a valid keyboard response is generated.</td>
</tr>
<tr>
<td>valid_responses</td>
<td>array</td>
<td>An array of key codes or character strings representing valid responses. Responses not on the list will be ignored. An empty array indicates that all responses are acceptable.</td>
</tr>
<tr>
<td>rt_method</td>
<td>string</td>
<td>Indicates which method of recording time to use. The <code>'date'</code> method uses calls to <code>(new Date()).getTime()</code> to record timing information. The <code>'performance'</code> method uses calls to <code>performance.now()</code>, which is a more modern JavaScript feature. The <code>'performance'</code> approach is <a href="http://caniuse.com/#search=performance">not supported by all the major browsers yet</a>, but adoption rates are increasing. The <code>audio</code> method is used in conjuction with an <code>audio_context</code> (set as an additional parameter). This uses the clock time of the <code>audio_context</code> when audio stimuli are being played.</td>
</tr>
<tr>
<td>audio_context</td>
<td>AudioContext object</td>
<td>The AudioContext of the audio file that is being played.</td>
</tr>
<tr>
<td>audio_context_start_time</td>
<td>numeric</td>
<td>The scheduled time of the sound file in the AudioContext. This will be used as the start time.</td>
</tr>
<tr>
<td>allow_held_key</td>
<td>boolean</td>
<td>If <code>true</code>, then responses will be registered from keys that are being held down. If <code>false</code>, then a held key can only register a response the first time that <code>getKeyboardResponse</code> is called for that key. For example, if a participant holds down the <code>A</code> key before the experiment starts, then the first time <code>getKeyboardResponse</code> is called, the <code>A</code> will register as a key press. However, any future calls to <code>getKeyboardResponse</code> will not register the <code>A</code> until the participant releases the key and presses it again.</td>
</tr>
<tr>
<td>persist</td>
<td>boolean</td>
<td>If false, then the keyboard listener will only trigger the first time a valid key is pressed. If true, then it will trigger every time a valid key is pressed until it is explicitly cancelled by <code>jsPsych.pluginAPI.cancelKeyboardResponse</code> or <code>jsPsych.pluginAPI.cancelAllKeyboardResponses</code>.</td>
</tr>
</tbody>
</table>
<h3 id="return-value_5">Return value</h3>
<p>Return an object that uniquely identifies the keyboard listener. This object can be passed to <code>jsPsych.pluginAPI.cancelKeyboardResponse</code> to cancel the keyboard listener.</p>
<h3 id="description_5">Description</h3>
<p>Gets a keyboard response from the subject, recording the response time from when the function is first called until a valid response is generated.</p>
<p>A valid response triggers the <code>callback_function</code> specified in the parameters. A single argument is passed to the callback function. The argument contains an object with the properties <code>key</code> and <code>rt</code>. <code>key</code> contains the numeric key code of the response, and <code>rt</code> contains the response time.</p>
<h3 id="examples_5">Examples</h3>
<h4 id="get-a-single-response-from-any-key">Get a single response from any key</h4>
<pre><code class="javascript">
var after_response = function(info){
    alert('You pressed key '+info.key+' after '+info.rt+'ms');
}

jsPsych.pluginAPI.getKeyboardResponse({
  callback_function:after_response,
  valid_responses: [],
  rt_method: 'date',
  persist: false
});
</code></pre>

<h4 id="get-a-responses-from-a-key-until-the-letter-q-is-pressed">Get a responses from a key until the letter Q is pressed</h4>
<pre><code class="javascript">
var after_response = function(info){
    alert('You pressed key '+info.key+' after '+info.rt+'ms');

    if(info.key == 81){ // the key code for 'Q' is 81.
        jsPsych.pluginAPI.cancelKeyboardResponse(listener);
    }
}

var listener = jsPsych.pluginAPI.getKeyboardResponse({
  callback_function:after_response,
  valid_responses: [],
  rt_method: 'date',
  persist: true
});
</code></pre>

<hr />
<h2 id="jspsychpluginapievaluatefunctionparameters">jsPsych.pluginAPI.evaluateFunctionParameters</h2>
<pre><code>jsPsych.pluginAPI.evaluateFunctionParameters(trial, protect)
</code></pre>

<h3 id="parameters_6">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>trial</td>
<td>object</td>
<td>An object representing the trial (typically the same variable that gets passed to the <code>plugin.trial</code> method). It contains <code>key: value</code> pairs describing all the trial parameters.</td>
</tr>
<tr>
<td>protect</td>
<td>array</td>
<td>An array of strings, indicating which parameters in the <code>trial</code> object should be protected from normalization</td>
</tr>
</tbody>
</table>
<h3 id="return-value_6">Return value</h3>
<p>Returns a the trial object with all values that were functions replaced by the return value of the function.</p>
<h3 id="description_6">Description</h3>
<p>This method replaces any parameters that are functions with the output of the function.</p>
<h3 id="example">Example</h3>
<pre><code class="javascript">
// a snippet from a trial method

plugin.trial = function(display_element, trial) {

    trial = jsPsych.pluginAPI.evaluateFunctionParameters(trial);

     // the rest of the trial code...
}

</code></pre>

<hr />
<h2 id="jspsychpluginapipreloadimages">jsPsych.pluginAPI.preloadImages</h2>
<pre><code>jsPsych.pluginAPI.preloadImages(images, callback_complete, callback_load)
</code></pre>

<h3 id="parameters_7">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>files</td>
<td>array</td>
<td>An array of audio file paths to load. The array can be nested (e.g. if images are in multiple arrays to help sort by condition or task).</td>
</tr>
<tr>
<td>callback_complete</td>
<td>function</td>
<td>A function to execute when all the files have been loaded.</td>
</tr>
<tr>
<td>callback_load</td>
<td>function</td>
<td>A function to execute after each file has been loaded. A single parameter is passed to this function which contains the number of files that have been loaded so far.</td>
</tr>
</tbody>
</table>
<h3 id="return-value_7">Return value</h3>
<p>Returns nothing.</p>
<h3 id="description_7">Description</h3>
<p>Use this function to preload audio files that are not part of a plugin with automatic preloading. Audio files in official plugins will automatically preload. See <a href="../../features/media-preloading/">Media Preloading</a> for more information.</p>
<p>It is possible to run this function without specifying a callback function. However, in this case the code will continue executing while the files are loaded. Thus, it is possible that an audio file would be required for playing before it is done preloading. The <code>callback_complete</code> function will only execute after all the audio files are loaded, and can be used to control the flow of the experiment (e.g. by starting the experiment in the <code>callback_complete</code> function).</p>
<p>The <code>callback_load</code> function can be used to indicate progress. See example below.</p>
<h3 id="examples_6">Examples</h3>
<h4 id="basic-use">Basic use</h4>
<pre><code class="javascript">
var sounds = ['file1.mp3', 'file2.mp3', 'file3.mp3'];

jsPsych.preloadAudioFiles(sounds, function(){ startExperiment(); });

function startExperiment(){
    jsPsych.init({
        timeline: exp
    });
}

</code></pre>

<h4 id="show-progress-of-loading">Show progress of loading</h4>
<pre><code class="javascript">var sounds = ['file1.mp3', 'file2.mp3', 'file3.mp3'];

jsPsych.preloadAudioFiles(sounds, function(){ startExperiment(); }, function(nLoaded) { updateLoadedCount(nLoaded); });

function updateLoadedCount(nLoaded){
    var percentcomplete = nLoaded / sounds.length * 100;

    // could put something fancier here, like a progress bar
    // or updating text in the DOM.
    console.log('Loaded '+percentcomplete+'% of audio files');
}

function startExperiment(){
    jsPsych.init({
        timeline: exp
    });
}
</code></pre>

<hr />
<h2 id="jspsychpluginapipreloadimages_1">jsPsych.pluginAPI.preloadImages</h2>
<pre><code>jsPsych.pluginAPI.preloadImages(images, callback_complete, callback_load)
</code></pre>

<h3 id="parameters_8">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>images</td>
<td>array</td>
<td>An array of image paths to load. The array can be nested (e.g. if images are in multiple arrays to help sort by condition or task).</td>
</tr>
<tr>
<td>callback_complete</td>
<td>function</td>
<td>A function to execute when all the images have been loaded.</td>
</tr>
<tr>
<td>callback_load</td>
<td>function</td>
<td>A function to execute after each image has been loaded. A single parameter is passed to this function which contains the number of images that have been loaded so far.</td>
</tr>
</tbody>
</table>
<h3 id="return-value_8">Return value</h3>
<p>Returns nothing.</p>
<h3 id="description_8">Description</h3>
<p>Use this function to preload image files that are not part of a plugin with automatic preloading. Image files in official plugins will automatically preload. See <a href="../../features/media-preloading/">Media Preloading</a> for more information.</p>
<p>It is possible to run this function without specifying a callback function. However, in this case the code will continue executing while the images are loaded. Thus, it is possible that an image would be required for display before it is done preloading. The <code>callback_complete</code> function will only execute after all the images are loaded, and can be used to control the flow of the experiment (e.g. by starting the experiment in the <code>callback_complete</code> function).</p>
<p>The <code>callback_load</code> function can be used to indicate progress, if the number of images to be loaded is known ahead of time. See example below.</p>
<h3 id="examples_7">Examples</h3>
<h4 id="basic-use_1">Basic use</h4>
<pre><code class="javascript">
var images = ['img/file1.png', 'img/file2.png', 'img/file3.png'];

jsPsych.preloadImages(images, function(){ startExperiment(); });

function startExperiment(){
    jsPsych.init({
        timeline: exp
    });
}

</code></pre>

<h4 id="show-progress-of-loading_1">Show progress of loading</h4>
<pre><code class="javascript">var images = ['img/file1.png', 'img/file2.png', 'img/file3.png'];

jsPsych.preloadImages(images, function(){ startExperiment(); }, function(nLoaded) { updateLoadedCount(nLoaded); });

function updateLoadedCount(nLoaded){
    var percentcomplete = nLoaded / images.length * 100;

    // could put something fancier here, like a progress bar
    // or updating text in the DOM.
    console.log('Loaded '+percentcomplete+'% of images');
}

function startExperiment(){
    jsPsych.init({
        timeline: exp
    });
}
</code></pre>

<hr />
<h2 id="jspsychpluginapiregisterpreload">jsPsych.pluginAPI.registerPreload</h2>
<pre><code>jsPsych.pluginAPI.registerPreload(plugin_name, parameter, media_type)
</code></pre>

<h3 id="parameters_9">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>plugin_name</td>
<td>string</td>
<td>The name of the plugin. e.g., 'single-stim'.</td>
</tr>
<tr>
<td>parameter</td>
<td>string</td>
<td>The name of the parameter that is a media file. e.g., 'stimulus'</td>
</tr>
<tr>
<td>media_type</td>
<td>string</td>
<td>The type of media, either 'image' or 'audio'.</td>
</tr>
</tbody>
</table>
<h3 id="return-value_9">Return value</h3>
<p>Nothing.</p>
<h3 id="description_9">Description</h3>
<p>Use this method in a plugin file to mark a parameter as containing an element that should be preloaded. The method should be called in the plugin file such that it gets called when the file is loaded.</p>
<h3 id="example_1">Example</h3>
<p>For an example, see the <a href="https://github.com/jodeleeuw/jsPsych/blob/master/plugins/jspsych-single-stim.js">single-stim</a> and <a href="https://github.com/jodeleeuw/jsPsych/blob/master/plugins/jspsych-single-audio.js">single-audio</a> plugins.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../plugins/overview/" class="btn btn-neutral float-right" title="Overview"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../jspsych-turk/" class="btn btn-neutral" title="jsPsych.turk"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../jspsych-turk/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../plugins/overview/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
