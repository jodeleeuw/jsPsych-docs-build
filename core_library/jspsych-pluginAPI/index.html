<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

        <title>jsPsych.pluginAPI - jsPsych</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="../../css/extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">jsPsych</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../tutorials/go-nogo-task">Demo Experiment: Go / No-Go Task</a>
                        </li>
                    
                        <li >
                            <a href="../../tutorials/flanker-task">Demo Experiment: Flanker Task</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Core Library API <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../overview">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../jspsych-core">jsPsych core</a>
                        </li>
                    
                        <li >
                            <a href="../jspsych-data">jsPsych.data</a>
                        </li>
                    
                        <li >
                            <a href="../jspsych-randomization">jsPsych.randomization</a>
                        </li>
                    
                        <li >
                            <a href="../jspsych-turk">jsPsych.turk</a>
                        </li>
                    
                        <li class="active">
                            <a href=".">jsPsych.pluginAPI</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Plugins <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../plugins/overview">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/creating-a-plugin">Creating a New Plugin</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-animation">jspsych-animation</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-call-function">jspsych-call-function</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-categorize">jspsych-categorize</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-categorize-animation">jspsych-categorize-animation</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-free-sort">jspsych-free-sort</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-html">jspsych-html</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-palmer">jspsych-palmer</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-same-different">jspsych-same-different</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-similarity">jspsych-similarity</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-single-stim">jspsych-single-stim</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-survey-likert">jspsych-survey-likert</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-survey-text">jspsych-survey-text</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-text">jspsych-text</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-visual-search-circle">jspsych-visual-search-circle</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-vsl-animate-occlusion">jspsych-vsl-animate-occlusion</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-vsl-grid-scene">jspsych-vsl-grid-scene</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/jspsych-xab">jspsych-xab</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Features <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../features/chunks-blocks-trials">Creating an Experiment: Chunks, Blocks, & Trials</a>
                        </li>
                    
                        <li >
                            <a href="../../features/progress-bar">Automatic Progress Bar</a>
                        </li>
                    
                        <li >
                            <a href="../../features/mturk">Integrating with Mechanical Turk</a>
                        </li>
                    
                        <li >
                            <a href="../../features/data">Data Storage</a>
                        </li>
                    
                        <li >
                            <a href="../../features/randomization-repetition">Randomization & Repetition</a>
                        </li>
                    
                        <li >
                            <a href="../../features/functions-as-parameters">Using Functions as Plugin Parameters</a>
                        </li>
                    
                        <li >
                            <a href="../../features/callbacks">Event-related Callback Functions</a>
                        </li>
                    
                        <li >
                            <a href="../../features/image-preloading">Image Preloading</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li >
                    <a href="../../support">Support</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../about/about">About jsPsych</a>
                        </li>
                    
                        <li >
                            <a href="../../about/license">License</a>
                        </li>
                    
                        <li >
                            <a href="../../about/contributing">Contributing to jsPsych</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../jspsych-turk">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../../plugins/overview">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/jodeleeuw/jsPsych">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#jspsychpluginapi">jsPsych.pluginAPI</a></li>
        
            <li><a href="#jspsychpluginapicancelallkeyboardresponses">jsPsych.pluginAPI.cancelAllKeyboardResponses</a></li>
        
            <li><a href="#jspsychpluginapicancelkeyboardresponse">jsPsych.pluginAPI.cancelKeyboardResponse</a></li>
        
            <li><a href="#jspsychpluginapienforcearray">jsPsych.pluginAPI.enforceArray</a></li>
        
            <li><a href="#jspsychpluginapigetkeyboardresponse">jsPsych.pluginAPI.getKeyboardResponse</a></li>
        
            <li><a href="#jspsychpluginapinormalizetrialvariables">jsPsych.pluginAPI.normalizeTrialVariables</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="jspsychpluginapi">jsPsych.pluginAPI</h1>
<p>The pluginAPI module contains functions that are useful when developing new plugins. </p>
<hr />
<h2 id="jspsychpluginapicancelallkeyboardresponses">jsPsych.pluginAPI.cancelAllKeyboardResponses</h2>
<pre class="prettyprint well"><code>jsPsych.pluginAPI.cancelAllKeyboardResponses()
</code></pre>

<h3 id="parameters">Parameters</h3>
<p>None.</p>
<h3 id="return-value">Return value</h3>
<p>Returns nothing.</p>
<h3 id="description">Description</h3>
<p>Cancels all currently active keyboard listeners created by <code>jsPsych.pluginAPI.getKeyboardResponse</code>.</p>
<h3 id="examples">Examples</h3>
<pre class="prettyprint well"><code class="javascript">jsPsych.pluginAPI.cancelAllKeyboardResponses();
</code></pre>

<hr />
<h2 id="jspsychpluginapicancelkeyboardresponse">jsPsych.pluginAPI.cancelKeyboardResponse</h2>
<pre class="prettyprint well"><code>jsPsych.pluginAPI.cancelKeyboardResponse(listener_id)
</code></pre>

<h3 id="parameters_1">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>listener_id</td>
<td>object</td>
<td>The listener_id object generated by the call to <code>jsPsych.pluginAPI.getKeyboardResponse</code>.</td>
</tr>
</tbody>
</table>
<h3 id="return-value_1">Return value</h3>
<p>Returns nothing.</p>
<h3 id="description_1">Description</h3>
<p>Cancels a specific keyboard listener created by <code>jsPsych.pluginAPI.getKeyboardResponse</code>.</p>
<h3 id="examples_1">Examples</h3>
<pre class="prettyprint well"><code class="javascript">// create a persistent keyboard listener
var listener_id = jsPsych.pluginAPI.getKeyboardResponse(after_response, ['p','q'], 'date', true);

// cancel keyboard listener
jsPsych.pluginAPI.cancelKeyboardResponse(listener_id);
</code></pre>

<hr />
<h2 id="jspsychpluginapienforcearray">jsPsych.pluginAPI.enforceArray</h2>
<pre class="prettyprint well"><code>jsPsych.pluginAPI.enforceArray(params, possible_arrays)
</code></pre>

<h3 id="parameters_2">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>params</td>
<td>object</td>
<td>An object of <code>key: value</code> pairs.</td>
</tr>
<tr>
<td>possible_arrays</td>
<td>array</td>
<td>Array of strings where each string is a key from <code>params</code> indicating which <code>keys</code> should have arrays as the <code>value</code>.</td>
</tr>
</tbody>
</table>
<h3 id="return-value_2">Return value</h3>
<p>Returns a copy of <code>params</code> where all of the <code>keys</code> in <code>possible_arrays</code> are guaranteed to be arrays. </p>
<h3 id="description_2">Description</h3>
<p>This function checks if specified parameters are arrays. If they are not arrays, then it converts them to arrays. Practically, this is used for cases where a plugin calls for an array, but a single value is also a reasonable option. An example would be specifying a stimulus for the <code>single-stim</code> plugin. Technically, the plugin requires the stimuli to be specified in an array. Each element of the array is then given its own trial. However, a single element array to present one trial is possible. This function means that users can declare the single element array as either an array or just the value that would be the element in the array.</p>
<h3 id="examples_2">Examples</h3>
<pre class="prettyprint well"><code class="javascript">
// a snippet from the text plugin
plugin.create = function(params) {

  params = jsPsych.pluginAPI.enforceArray(params, ['text','data']);

  // other stuff here ... 

};

</code></pre>

<hr />
<h2 id="jspsychpluginapigetkeyboardresponse">jsPsych.pluginAPI.getKeyboardResponse</h2>
<pre class="prettyprint well"><code>jsPsych.pluginAPI.getKeyboardResponse(callback_function, valid_responses, rt_method, persist)
</code></pre>

<h3 id="parameters_3">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>callback_function</td>
<td>function</td>
<td>The function to execute whenever a valid keyboard response is generated.</td>
</tr>
<tr>
<td>valid_responses</td>
<td>array</td>
<td>An array of key codes or character strings representing valid responses. Responses not on the list will be ignored. An empty array indicates that all responses are acceptable.</td>
</tr>
<tr>
<td>rt_method</td>
<td>string</td>
<td>Indicates which method of recording time to use. The <code>'date'</code> method uses calls to <code>(new Date()).getTime()</code> to record timing information. The <code>'performance'</code> method uses calls to <code>performance.now()</code>, which is a more modern JavaScript feature. The <code>'performance'</code> approach is <a href="http://caniuse.com/#search=performance">not supported by all the major browsers yet</a>, but adoption rates are increasing.</td>
</tr>
<tr>
<td>persist</td>
<td>boolean</td>
<td>If false, then the keyboard listener will only trigger the first time a valid key is pressed. If true, then it will trigger every time a valid key is pressed until it is explicitly cancelled by <code>jsPsych.pluginAPI.cancelKeyboardResponse</code> or <code>jsPsych.pluginAPI.cancelAllKeyboardResponses</code>.</td>
</tr>
</tbody>
</table>
<h3 id="return-value_3">Return value</h3>
<p>Return an object that uniquely identifies the keyboard listener. This object can be passed to <code>jsPsych.pluginAPI.cancelKeyboardResponse</code> to cancel the keyboard listener.</p>
<h3 id="description_3">Description</h3>
<p>Gets a keyboard response from the subject, recording the response time from when the function is first called until a valid response is generated. </p>
<p>A valid response triggers the <code>callback_function</code> specified in the parameters. A single argument is passed to the callback function. The argument contains an object with the properties <code>key</code> and <code>rt</code>. <code>key</code> contains the numeric key code of the response, and <code>rt</code> contains the response time.</p>
<h3 id="examples_3">Examples</h3>
<h4 id="get-a-single-response-from-any-key">Get a single response from any key</h4>
<pre class="prettyprint well"><code class="javascript">
var after_response = function(info){
    alert('You pressed key '+info.key+' after '+info.rt+'ms');
}

jsPsych.pluginAPI.getKeyboardResponse(after_response, [], 'date', false);
</code></pre>

<h4 id="get-a-responses-from-a-key-until-the-letter-q-is-pressed">Get a responses from a key until the letter Q is pressed</h4>
<pre class="prettyprint well"><code class="javascript">
var after_response = function(info){
    alert('You pressed key '+info.key+' after '+info.rt+'ms');

    if(info.key == 81){ // the key code for 'Q' is 81.
        jsPsych.pluginAPI.cancelKeyboardResponse(listener);
    }
}

var listener = jsPsych.pluginAPI.getKeyboardResponse(after_response, [], 'date', true);
</code></pre>

<hr />
<h2 id="jspsychpluginapinormalizetrialvariables">jsPsych.pluginAPI.normalizeTrialVariables</h2>
<pre class="prettyprint well"><code>jsPsych.pluginAPI.normalizeTrialVariables(trial, protect)
</code></pre>

<h3 id="parameters_4">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>trial</td>
<td>object</td>
<td>An object representing the trial (typically the same variable that gets passed to the <code>plugin.trial</code> method). It contains <code>key: value</code> pairs describing all the trial parameters.</td>
</tr>
<tr>
<td>protect</td>
<td>array</td>
<td>An array of strings, indicating which parameters in the <code>trial</code> object should be protected from normalization</td>
</tr>
</tbody>
</table>
<h3 id="return-value_4">Return value</h3>
<p>Returns a new trial object with all values that were functions replaced by the return value of the function.</p>
<h3 id="description_4">Description</h3>
<p>This method replaces any parameters that are functions with the output of the function.</p>
<h3 id="example">Example</h3>
<pre class="prettyprint well"><code class="javascript">
// a snippet from a trial method

plugin.trial = function(display_element, trial) {

    trial = jsPsych.pluginAPI.normalizeTrialVariables(trial);

     // the rest of the trial code...
}

</code></pre>

</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../js/extra.js"></script>
        <script src="../../js/analytics.js"></script>
    </body>
</html>