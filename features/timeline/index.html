<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating an Experiment: The Timeline - jsPsych</title>
  

  <link rel="shortcut icon" href="../../favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/extra.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Creating an Experiment: The Timeline";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 
  <script src="../../js/extra.js"></script>
  <script src="../../js/analytics.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> jsPsych</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Introduction</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Tutorials</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/hello-world/">The Basics: Hello World</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/rt-task/">Demo Experiment: Simple Reaction Time Task</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Features</span></li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Creating an Experiment: The Timeline</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#creating-an-experiment-the-timeline">Creating an Experiment: The Timeline</a></li>
                
                    <li><a class="toctree-l4" href="#a-single-trial">A single trial</a></li>
                
                    <li><a class="toctree-l4" href="#multiple-trials">Multiple trials</a></li>
                
                    <li><a class="toctree-l4" href="#nested-timelines">Nested timelines</a></li>
                
                    <li><a class="toctree-l4" href="#randomizing-the-order-of-trials-on-a-timeline">Randomizing the order of trials on a timeline</a></li>
                
                    <li><a class="toctree-l4" href="#looping-timelines">Looping timelines</a></li>
                
                    <li><a class="toctree-l4" href="#conditional-timelines">Conditional timelines</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../data/">Data Storage</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../functions-as-parameters/">Dynamic Content:  Using Functions as Plugin Parameters</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../callbacks/">Event-related Callback Functions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../media-preloading/">Media Preloading</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../fullscreen/">Fullscreen Experiments</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../progress-bar/">Automatic Progress Bar</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../mturk/">Integrating with Mechanical Turk</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Core Library API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../core_library/overview/">Overview</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../core_library/jspsych-core/">jsPsych core</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../core_library/jspsych-data/">jsPsych.data</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../core_library/jspsych-randomization/">jsPsych.randomization</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../core_library/jspsych-turk/">jsPsych.turk</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../core_library/jspsych-pluginAPI/">jsPsych.pluginAPI</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Plugins</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/overview/">Overview</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/creating-a-plugin/">Creating a New Plugin</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-animation/">jspsych-animation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-call-function/">jspsych-call-function</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-categorize/">jspsych-categorize</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-categorize-animation/">jspsych-categorize-animation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-free-sort/">jspsych-free-sort</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-html/">jspsych-html</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-instructions/">jspsych-instructions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-multi-stim-multi-response/">jspsych-multi-stim-multi-response</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-palmer/">jspsych-palmer</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-reconstruction/">jspsych-reconstruction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-same-different/">jspsych-same-different</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-similarity/">jspsych-similarity</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-single-audio/">jspsych-single-audio</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-single-stim/">jspsych-single-stim</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-survey-likert/">jspsych-survey-likert</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-survey-multi-choice/">jspsych-survey-multi-choice</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-survey-text/">jspsych-survey-text</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-text/">jspsych-text</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-visual-search-circle/">jspsych-visual-search-circle</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-vsl-animate-occlusion/">jspsych-vsl-animate-occlusion</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-vsl-grid-scene/">jspsych-vsl-grid-scene</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugins/jspsych-xab/">jspsych-xab</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../support/">Support</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>About</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../about/about/">About jsPsych</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../about/license/">License</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../about/contributing/">Contributing to jsPsych</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">jsPsych</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Features &raquo;</li>
        
      
    
    <li>Creating an Experiment: The Timeline</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/jodeleeuw/jsPsych" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="creating-an-experiment-the-timeline">Creating an Experiment: The Timeline</h1>
<p>To create an experiment using jsPsych, you need to specify a timeline that describes the experiment. The timeline is an ordered set of trials. You must create the timeline before launching the experiment. The bulk of the code you will write for an experiment will be code to create the timeline. This page walks through the creation of timelines, including very basic examples and more advanced features.</p>
<h2 id="a-single-trial">A single trial</h2>
<p>To create a trial, you need to create an object that describes the trial. The most important feature of this object is the <code>type</code> parameter. This tells jsPsych which plugin file to use to run the trial. For example, if you want to use the text plugin to display a short message, the trial object would look like this:</p>
<pre><code class="javascript">var trial = {
    type: 'text',
    text: 'hello world!'
}
</code></pre>

<p>The parameters for this object will depend on the plugin that you choose. Each plugin defines the set of parameters that are needed to run a trial with that plugin. Visit the documentation for a plugin to learn about the parameters that you can use with that plugin.</p>
<p>To create a timeline with the single trial and run the experiment, just embed the trial object in an array. A timeline is simply an array of trials.</p>
<pre><code class="javascript">var timeline = [trial];

jsPsych.init({
    timeline: timeline
});
</code></pre>

<p>To actually create and run this simple example, complete the <a href="../../tutorials/hello-world/">hello world tutorial</a>.</p>
<h2 id="multiple-trials">Multiple trials</h2>
<p>Scaling up to multiple trials is easy. Just create an object for each trial, and add each object to the array.</p>
<pre><code class="javascript">// with lots of trials, it might be easier to add the trials
// to the timeline array as they are defined.
var timeline = [];

var trial_1 = {
    type: 'text',
    text: 'This is trial 1.'
}
timeline.push(trial_1);

var trial_2 = {
    type: 'text',
    text: 'This is trial 2.'
}
timeline.push(trial_2);

var trial_3 = {
    type: 'text',
    text: 'This is trial 3.'
}
timeline.push(trial_3);
</code></pre>

<h2 id="nested-timelines">Nested timelines</h2>
<p>Each object on the timeline can also have it's own timeline. This is useful for a lot of reasons. The first is that it allows you to define common parameters across trials once and have them apply to all the trials on the nested timeline. The example below creates a series of trials using the single-stim plugin, where the only thing that changes from trial-to-trial is the image file being displayed on the screen.</p>
<pre><code class="javascript">var judgment_trials = {
    type: 'single-stim',
    prompt: '&lt;p&gt;Press a number 1-7 to indicate how unusual the image is.&lt;/p&gt;',
    choices: ['1','2','3','4','5','6','7'],
    timeline: [
        {stimulus: 'image1.png'},
        {stimulus: 'image2.png'},
        {stimulus: 'image3.png'}
    ]
}
</code></pre>

<p>In the above code, the <code>type</code>, <code>prompt</code>, and <code>choices</code> parameters are automatically applied to all of the objects in the <code>timeline</code> array. This creates three trials with the same <code>type</code>, <code>prompt</code>, and <code>choices</code> parameters, but different values for the <code>stimulus</code> parameter.</p>
<p>You can also override the values by declaring a new value in the <code>timeline</code> array. In the example below, the second trial will display a different prompt message.</p>
<pre><code class="javascript">var judgment_trials = {
    type: 'single-stim',
    prompt: '&lt;p&gt;Press a number 1-7 to indicate how unusual the image is.&lt;/p&gt;',
    choices: ['1','2','3','4','5','6','7'],
    timeline: [
        {stimulus: 'image1.png'},
        {stimulus: 'image2.png', prompt: '&lt;p&gt;Press 1 for this trial.&lt;/p&gt;'},
        {stimulus: 'image3.png'}
    ]
}
</code></pre>

<p>Timelines can be nested any number of times.</p>
<h2 id="randomizing-the-order-of-trials-on-a-timeline">Randomizing the order of trials on a timeline</h2>
<p>You can randomize the order that the trials on timeline occur by setting the parameter <code>randomize_order</code> to <code>true</code>.</p>
<pre><code class="javascript">var judgment_trials = {
    type: 'single-stim',
    prompt: '&lt;p&gt;Press a number 1-7 to indicate how unusual the image is.&lt;/p&gt;',
    choices: ['1','2','3','4','5','6','7'],
    timeline: [
        {stimulus: 'image1.png'},
        {stimulus: 'image2.png'},
        {stimulus: 'image3.png'}
    ],
    randomize_order: true
}
</code></pre>

<p>If the timeline repeats multiple times (through a loop), then the order will be re-randomized at the start of each iteration.</p>
<h2 id="looping-timelines">Looping timelines</h2>
<p>Any timeline can be looped using the <code>loop_function</code> option. The loop function should be a function that evaluates to <code>true</code> if the timeline should repeat, and <code>false</code> if the timeline should end. The loop function will be evaluated after the timeline is completed.</p>
<pre><code class="javascript">var trial = {
    type: 'text',
    text: 'Hello. This is in a loop. Press R to repeat this trial, or C to continue.'
}

var loop_node = {
    timeline: [trial],
    loop_function: function(data){
        if(jsPsych.pluginAPI.convertKeyCharacterToKeyCode('r') == data[0].key_press){
            return true;
        } else {
            return false;
        }
    }
}
</code></pre>

<h2 id="conditional-timelines">Conditional timelines</h2>
<p>A timeline can be skipped based on the evaluation of a function using the <code>conditional_function</code> option. If the conditional function evaluates to <code>true</code>, the timeline will execute normally. If the conditional function evaluates to <code>false</code>, then the timeline will be skipped. The conditional function is evaluated whenever the timeline is about to run the first trial.</p>
<pre><code class="javascript">var pre_if_trial = {
    type: 'text',
    text: 'The next trial is in a conditional statement. Press S to skip it, or V to view it.'
}

var if_trial = {
    type: 'text',
    text: 'You chose to view the trial. Press any key to continue.'
}

var if_node = {
    timeline: [if_trial],
    conditional_function: function(){
        var data = jsPsych.data.getLastTrialData();
        if(data.key_press == jsPsych.pluginAPI.convertKeyCharacterToKeyCode('s')){
            return false;
        } else {
            return true;
        }
    }
}

var after_if_trial = {
    type: 'text',
    text: 'This is the trial after the conditional.'
}

jsPsych.init({
    display_element: $('#jspsych-target'),
    timeline: [pre_if_trial, if_node, after_if_trial],
    on_finish: function(){jsPsych.data.displayData(); }
});
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../data/" class="btn btn-neutral float-right" title="Data Storage"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../tutorials/rt-task/" class="btn btn-neutral" title="Demo Experiment: Simple Reaction Time Task"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../../tutorials/rt-task/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../data/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
